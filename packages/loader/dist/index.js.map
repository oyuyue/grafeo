{"version":3,"sources":["webpack://@mfes/loader/./index.js"],"names":["global","self","hasDocument","document","ENTRY","SystemJS","this","registry","urlMap","systemJSPrototype","prototype","processScripts","forEach","call","querySelectorAll","script","sp","type","set","JSON","parse","innerHTML","imports","import","id","field","loader","Promise","resolve","then","load","getOrCreateLoad","C","instantiateAll","postOrderExec","n","topLevelLoad","m","default","field1","lastRegister","firstRegister","importerSetters","ns","Object","create","instantiatePromise","getRegister","instantiate","registration","Error","declared","name","value","h","changed","p","__esModule","i","length","setter","importId","undefined","e","execute","setters","linkPromise","instantiation","all","map","dep","depId","depLoad","I","push","depLoads","d","catch","err","er","L","E","loaded","register","deps","declare","loc","assign","_lastRegister","lastWindowErrorUrl","lastWindowError","nullContext","freeze","seen","depLoadPromises","depLoadPromise","doExec","execPromise","window","addEventListener","evt","filename","error","url","reject","createElement","async","indexOf","location","origin","crossOrigin","src","head","removeChild","appendChild","tmpRegister","firstNamedDefine","emptyInstantiation","unsupportedRequire","emptyFn","lastRegisterDeclare","requireExportsModule","createAMDRegister","amdDefineDeps","amdDefineExec","exports","module","depModules","splice","index","createSetter","amdExec","_export","__useDefault","amdResult","apply","idx","systemAmdRegister","arguments","getDepsAndExec","arg1","arg2","Array","addToRegisterRegistry","define","System","registerRegistry","_firstNamedDefine","_amdDefineDeps","depsAndExec","concat","amd"],"mappings":"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","file":"index.js","sourcesContent":["var global = typeof self !== 'undefined' ? self : global\nvar hasDocument = typeof document !== 'undefined'\nvar ENTRY = '__ENTRY'\n\nfunction SystemJS () {\n  this.registry = {};\n  this.urlMap = {};\n}\n\nvar systemJSPrototype = SystemJS.prototype;\n\nsystemJSPrototype.processScripts = function () {\n  [].forEach.call(document.querySelectorAll('script'), (script) => {\n    if (script.sp) return;\n    if (script.type === 'importmap') {\n      script.sp = true;\n      this.set(JSON.parse(script.innerHTML).imports)\n    }\n  })\n}\n\nsystemJSPrototype.import = function (id, field) {\n  var loader = this;\n  this.processScripts();\n  return Promise.resolve().then(function () {\n    var load = getOrCreateLoad(loader, loader.urlMap[id] || id);\n    return load.C || topLevelLoad(loader, load);\n  }).then(m => {\n    if (field === false) return m;\n    m = m.default\n    if (!m) return m;\n    return Promise.resolve(m).then(m => {\n      if (field === true) return m.default\n      return m[field1]\n    })\n  })\n};\n\nvar firstRegister = true;\nvar lastRegister;\nsystemJSPrototype.register = function (deps, declare, registry) {\n  if (registry) this.set(registry)\n  lastRegister = [deps, declare];\n\n  if (firstRegister) {\n    firstRegister = false;\n    this.import();\n  }\n};\n\nsystemJSPrototype.set = function(name, loc) {\n  if (typeof name === 'object') {\n    Object.assign(this.urlMap, name)\n  } else if (typeof name === 'string') {\n    this.urlMap[name] = loc;\n  }\n}\n\n/*\n * getRegister provides the last anonymous System.register call\n */\nsystemJSPrototype.getRegister = function () {\n  var _lastRegister = lastRegister;\n  lastRegister = undefined;\n  return _lastRegister;\n};\n\nfunction getOrCreateLoad(loader, id = ENTRY) {\n  var load = loader.registry[id];\n  if (load) return load;\n\n  var importerSetters = [];\n  var ns = Object.create(null);\n\n  var instantiatePromise = Promise.resolve()\n  .then(function () {\n    if (id === ENTRY) return loader.getRegister();\n    return loader.instantiate(id);\n  })\n  .then(function (registration) {\n    if (!registration) throw Error('no registration');\n    function _export (name, value) {\n      // note if we have hoisted exports (including reexports)\n      load.h = true;\n      var changed = false;\n      if (typeof name === 'string') {\n        if (!(name in ns) || ns[name] !== value) {\n          ns[name] = value;\n          changed = true;\n        }\n      }\n      else {\n        for (var p in name) {\n          var value = name[p];\n          if (!(p in ns) || ns[p] !== value) {\n            ns[p] = value;\n            changed = true;\n          }\n        }\n\n        ns.__esModule = true;\n      }\n      if (changed)\n        for (var i = 0; i < importerSetters.length; i++) {\n          var setter = importerSetters[i];\n          if (setter) setter(ns);\n        }\n      return value;\n    }\n    var declared = registration[1](_export, registration[1].length === 2 ? {\n      import: function (importId) {\n        return loader.import(importId, id);\n      }\n    } : undefined);\n    load.e = declared.execute || function () {};\n    return [registration[0], declared.setters || []];\n  });\n\n  var linkPromise = instantiatePromise\n  .then(function (instantiation) {\n    return Promise.all(instantiation[0].map(function (dep, i) {\n      var setter = instantiation[1][i];\n      return Promise.resolve(loader.urlMap[dep] || dep)\n      .then(function (depId) {\n        var depLoad = getOrCreateLoad(loader, depId);\n        // depLoad.I may be undefined for already-evaluated\n        return Promise.resolve(depLoad.I)\n        .then(function () {\n          if (setter) {\n            depLoad.i.push(setter);\n            // only run early setters when there are hoisted exports of that module\n            // the timing works here as pending hoisted export calls will trigger through importerSetters\n            if (depLoad.h || !depLoad.I) setter(depLoad.n);\n          }\n          return depLoad;\n        });\n      })\n    }))\n    .then(\n      function (depLoads) {\n        load.d = depLoads;\n      },\n      !true \n    )\n  });\n\n  linkPromise.catch(function (err) {\n    load.e = null;\n    load.er = err;\n  });\n\n  // Capital letter = a promise function\n  return load = loader.registry[id] = {\n    id: id,\n    // importerSetters, the setters functions registered to this dependency\n    // we retain this to add more later\n    i: importerSetters,\n    // module namespace object\n    n: ns,\n\n    // instantiate\n    I: instantiatePromise,\n    // link\n    L: linkPromise,\n    // whether it has hoisted exports\n    h: false,\n\n    // On instantiate completion we have populated:\n    // dependency load records\n    d: undefined,\n    // execution function\n    // set to NULL immediately after execution (or on any failure) to indicate execution has happened\n    // in such a case, C should be used, and E, I, L will be emptied\n    e: undefined,\n\n    // On execution we have populated:\n    // the execution error if any\n    er: undefined,\n    // in the case of TLA, the execution promise\n    E: undefined,\n\n    // On execution, L, I, E cleared\n\n    // Promise for top-level completion\n    C: undefined\n  };\n}\n\nfunction instantiateAll (loader, load, loaded) {\n  if (!loaded[load.id]) {\n    loaded[load.id] = true;\n    // load.L may be undefined for already-instantiated\n    return Promise.resolve(load.L)\n    .then(function () {\n      return Promise.all(load.d.map(function (dep) {\n        return instantiateAll(loader, dep, loaded);\n      }));\n    })\n  }\n}\n\nfunction topLevelLoad (loader, load) {\n  return load.C = instantiateAll(loader, load, {})\n  .then(function () {\n    return postOrderExec(loader, load, {});\n  })\n  .then(function () {\n    return load.n;\n  });\n}\n\n// the closest we can get to call(undefined)\nvar nullContext = Object.freeze(Object.create(null));\n\n// returns a promise if and only if a top-level await subgraph\n// throws on sync errors\nfunction postOrderExec (loader, load, seen) {\n  if (seen[load.id])\n    return;\n  seen[load.id] = true;\n\n  if (!load.e) {\n    if (load.er)\n      throw load.er;\n    if (load.E)\n      return load.E;\n    return;\n  }\n\n  // deps execute first, unless circular\n  var depLoadPromises;\n  load.d.forEach(function (depLoad) {\n      try {\n        var depLoadPromise = postOrderExec(loader, depLoad, seen);\n        if (depLoadPromise) \n          (depLoadPromises = depLoadPromises || []).push(depLoadPromise);\n      }\n      catch (err) {\n        load.e = null;\n        load.er = err;\n        throw err;\n      }\n  });\n  if (depLoadPromises)\n    return Promise.all(depLoadPromises).then(doExec, function (err) {\n      load.e = null;\n      load.er = err;\n      throw err;\n    });\n\n  return doExec();\n\n  function doExec () {\n    try {\n      var execPromise = load.e.call(nullContext);\n      if (execPromise) {\n          execPromise = execPromise.then(function () {\n            load.C = load.n;\n            load.E = null; // indicates completion\n            if (!true) ;\n          }, function (err) {\n            load.er = err;\n            load.E = null;\n            if (!true) ;\n            else throw err;\n          });\n        return load.E = load.E || execPromise;\n      }\n      // (should be a promise, but a minify optimization to leave out Promise.resolve)\n      load.C = load.n;\n      if (!true) ;\n    }\n    catch (err) {\n      load.er = err;\n      throw err;\n    }\n    finally {\n      load.L = load.I = undefined;\n      load.e = null;\n    }\n  }\n}\n\n/*\n * Script instantiation loading\n */\nvar lastWindowErrorUrl, lastWindowError;\nif (hasDocument) {\n  window.addEventListener('error', function (evt) {\n    lastWindowErrorUrl = evt.filename;\n    lastWindowError = evt.error;\n  });\n}\n\nsystemJSPrototype.instantiate = function (url) {\n  var loader = this;\n  return new Promise(function (resolve, reject) {\n    const script = document.createElement('script');\n    script.async = true;\n    if (url.indexOf(location.origin)) script.crossOrigin = 'anonymous';\n    script.src = url;\n    script.addEventListener('error', () => {\n      document.head.removeChild(script);\n      reject()\n    })\n    script.addEventListener('load', () => {\n      document.head.removeChild(script);\n      // Note that if an error occurs that isn't caught by this if statement,\n      // that getRegister will return null and a \"did not instantiate\" error will be thrown.\n      if (lastWindowErrorUrl === url) {\n        reject(lastWindowError);\n      }\n      else {\n        resolve(loader.getRegister());\n      }\n    })\n    document.head.appendChild(script);\n  });\n};\n\n\n\n// AMD\n\nvar emptyInstantiation = [[], function () { return {} }];\n\nfunction unsupportedRequire () {\n  throw Error('AMD require not supported');\n}\n\nvar tmpRegister, firstNamedDefine;\n\nfunction emptyFn () {}\n\nvar requireExportsModule = ['require', 'exports', 'module'];\n\nfunction createAMDRegister (amdDefineDeps, amdDefineExec) {\n  var exports = {};\n  var module = { exports: exports };\n  var depModules = [];\n  var setters = [];\n  var splice = 0;\n  for (var i = 0; i < amdDefineDeps.length; i++) {\n    var id = amdDefineDeps[i];\n    var index = setters.length;\n    if (id === 'require') {\n      depModules[i] = unsupportedRequire;\n      splice++;\n    }\n    else if (id === 'module') {\n      depModules[i] = module;\n      splice++;\n    }\n    else if (id === 'exports') {\n      depModules[i] = exports;\n      splice++;\n    }\n    else {\n      createSetter(i);\n    }\n    if (splice)\n      amdDefineDeps[index] = id;\n  }\n  if (splice)\n    amdDefineDeps.length -= splice;\n  var amdExec = amdDefineExec;\n  return [amdDefineDeps, function (_export) {\n    _export({ default: exports, __useDefault: true });\n    return {\n      setters: setters,\n      execute: function () {\n        var amdResult = amdExec.apply(exports, depModules);\n        if (amdResult !== undefined) module.exports = amdResult;\n        _export(module.exports);\n        _export('default', module.exports);\n      }\n    };\n  }];\n\n  // needed to avoid iteration scope issues\n  function createSetter(idx) {\n    setters.push(function (ns) {\n      depModules[idx] = ns.__useDefault ? ns.default : ns;\n    });\n  }\n}\n\n// hook System.register to know the last declaration binding\nvar lastRegisterDeclare;\nvar systemAmdRegister = systemJSPrototype.register;\nsystemJSPrototype.register = function (name, deps, declare) {\n  lastRegisterDeclare = typeof name === 'string' ? declare : deps;\n  systemAmdRegister.apply(this, arguments);\n};\n\nvar instantiate = systemJSPrototype.instantiate;\nsystemJSPrototype.instantiate = function() {\n  // Reset \"currently executing script\"\n  amdDefineDeps = null;\n  return instantiate.apply(this, arguments);\n};\n\nvar getRegister = systemJSPrototype.getRegister;\nsystemJSPrototype.getRegister = function () {\n  if (tmpRegister)\n    return tmpRegister;\n\n  var _firstNamedDefine = firstNamedDefine;\n  firstNamedDefine = null;\n\n  var register = getRegister.call(this);\n  // if its an actual System.register leave it\n  if (register && register[1] === lastRegisterDeclare)\n    return register;\n\n  var _amdDefineDeps = amdDefineDeps;\n  amdDefineDeps = null;\n\n  // If the script registered a named module, return that module instead of re-instantiating it.\n  if (_firstNamedDefine)\n    return _firstNamedDefine;\n\n  // otherwise AMD takes priority\n  // no registration -> attempt AMD detection\n  if (!_amdDefineDeps)\n    return register || emptyInstantiation;\n\n  return createAMDRegister(_amdDefineDeps, amdDefineExec);\n};\nvar amdDefineDeps, amdDefineExec;\nglobal.define = function (name, deps, execute) {\n  var depsAndExec;\n  // define('', [], function () {})\n  if (typeof name === 'string') {\n    depsAndExec = getDepsAndExec(deps, execute);\n    if (amdDefineDeps) {\n      if (!System.registerRegistry) {\n        throw Error('Include the named register extension for SystemJS named AMD support');\n      }\n      addToRegisterRegistry(name, createAMDRegister(depsAndExec[0], depsAndExec[1]));\n      amdDefineDeps = [];\n      amdDefineExec = emptyFn;\n      return;\n    }\n    else {\n      if (System.registerRegistry)\n        addToRegisterRegistry(name, createAMDRegister([].concat(depsAndExec[0]), depsAndExec[1]));\n      name = deps;\n      deps = execute;\n    }\n  }\n  depsAndExec = getDepsAndExec(name, deps);\n  amdDefineDeps = depsAndExec[0];\n  amdDefineExec = depsAndExec[1];\n};\nglobal.define.amd = {};\n\nfunction getDepsAndExec(arg1, arg2) {\n  // define([], function () {})\n  if (arg1 instanceof Array) {\n    return [arg1, arg2];\n  }\n  // define({})\n  else if (typeof arg1 === 'object') {\n    return [[], function () { return arg1 }];\n  }\n  // define(function () {})\n  else if (typeof arg1 === 'function') {\n    return [requireExportsModule, arg1];\n  }\n}\n\nfunction addToRegisterRegistry(name, define) {\n  if (!firstNamedDefine) {\n    firstNamedDefine = define;\n    Promise.resolve().then(function () {\n      firstNamedDefine = null;\n    });\n  }\n\n  // We must call System.getRegister() here to give other extras, such as the named-exports extra,\n  // a chance to modify the define before it's put into the registerRegistry.\n  // See https://github.com/systemjs/systemjs/issues/2073\n  tmpRegister = define;\n  System.registerRegistry[name] = System.getRegister();\n  tmpRegister = null;\n}\n\nglobal.System = new SystemJS()\n"],"sourceRoot":""}